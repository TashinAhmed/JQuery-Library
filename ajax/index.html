<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JQ Learn ajax</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>


<body>
    <header>
        <h1>JQ Learn ajax</h1>
    </header>

    <div id="container">
        <div id="result"></div>
        <ul id="users"></ul>

        <!-- post  -->
        <form id="postform" action="https://jsonplaceholder.typicode.com/posts">
            <input type="text" id="title" placeholder="title">
            <br>
            <textarea placeholder="body" id="body" cols="22" rows="10"></textarea>
            <br>
            <input type="submit" value="submit">
        </form>
    </div>

    <script>
        $(document).ready(function () {
            // WAY 1
            // $('#result').load('test.html');
            // $('#result').load('test.html', function (
            //     responseTxt, statusTxt, xhr) {
            //     if (statusTxt == "success") { // if the call/condition is a success
            //         alert("it went fine");
            //     }
            //     else if (statusTxt == "error") {
            //         alert("error:" + xhr.statusTxt); // if not a success
            //     }
            // });

            // WAY 2 
            // $.get('test.html',function(data){
            //     $('#result').html(data);
            // });

            // $.getJSON('users.json',function(data){
            //     $.each(data, function(i, user){
            //         $('ul#users').append('<li>'+user.firstname+'</li>');
            //     });
            // });

            // $.ajax({
            //     method:'GET',
            //     url: 'https://jsonplaceholder.typicode.com/posts',
            //     dataType: 'json'
            // }).done(function(data){
            //     console.log(data);
            //     $.map(data, function(post, i){
            //         $('#result').append('<h4>'+post.title+'</h4><p>'+post.body+'</p>');
            //     })
            // });


            $('#postform').submit(function (e) {
                e.preventDefault();
                var title = $('#title').val(); //title i'm puttin in form
                var body = $('#body').val(); // what I'm writing in body
                var url = $(this).attr('action');

                $.post(url, { title: title, body: body }).
                    done(function (data) {
                        console.log('post saved');
                        console.log(data);
                    });
            });

        });
    </script>

</body>


</html>